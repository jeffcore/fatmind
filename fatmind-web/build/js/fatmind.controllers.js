angular.module("fatmind.controllers",["restangular","ngDialog"]).controller("NoteCtrl",["$scope","$rootScope","$state","$window","$timeout","Restangular","ngDialog",function(e,o,t,n,a,s,u){e.quantum={note:"",dateCreated:""},e.quantumSelected={note:"",dateCreated:""},e.quanta,e.user=o.user,s.all("quantum").customGET().then(function(o){e.quanta=o.data,console.log(e.quanta)}),this.postQuantum=function(){e.quantum.note=e.quantum.note.trim(),console.log(e.quantum),s.one("quantum").customPOST(e.quantum,"",{},"").then(function(o){e.quanta.unshift(o.data),e.quantum={note:""}})},this.searchQuantum=function(){s.one("search").customPOST(e.quantum,"",{},"").then(function(o){console.log("search resposne"),console.log(o.data),e.quanta=[],e.quanta=o.data})},this.deleteQuantum=function(o,t){return console.log("delete id"+t),console.log("index"+o),console.log(e.quanta),s.one("quantum",t).remove("",s.defaultHeaders).then(function(t){console.log("worked"),e.quanta.splice(o,1)},function(){})},this.editQuantumDialog=function(o,t){console.log(e.quanta[o]),e.quantumSelected=e.quanta[o],u.open({template:"templates/editnote.html",className:"ngdialog-theme-default width50",scope:e})},e.editQuantum=function(){console.log(e.quantumSelected),s.one("quantum",e.quantumSelected._id).customPUT(e.quantumSelected,"",{},s.defaultHeaders).then(function(e){u.closeAll()})}}]).controller("LoginCtrl",["$scope","$rootScope","$state","$window","Restangular",function(e,o,t,n,a){e.user={email:"",password:""},e.errorMessage="",this.postLogin=function(){return e.errorMessage="",""===e.user.email||""===e.user.password?(e.errorMessage="Please fill in both fields.",!0):void a.one("login").customPOST(e.user,"",{},"").then(function(e){console.log(e),o.user.token=e.token,o.user.username=e.username,n.localStorage.token=e.token,n.localStorage.username=e.username,headers=a.defaultHeaders,headers["x-access-token"]=e.token,console.log(o.user.token),console.log(a.defaultHeaders),t.go("fatmind.note")},function(o){return e.errorMessage="Invalid email and/or password.",!1})}}]).controller("LogoutCtrl",["$scope","$rootScope","$state","$window","Restangular",function(e,o,t,n,a){o.user.token=void 0,n.localStorage.token=void 0,n.localStorage.username=void 0,headers=a.defaultHeaders,headers["x-access-token"]=void 0,t.go("fatmind.login")}]).controller("RegisterCtrl",["$scope","$rootScope","$state","$window","Restangular",function(e,o,t,n,a){e.user={username:"",email:"",password:""},e.errorMessage="",this.postRegister=function(){return e.errorMessage="",""===e.user.username||""===e.user.password||""===e.user.email?(e.errorMessage="Some fields were left blank.",!0):void a.one("user").customPOST(e.user,"",{},"").then(function(e){console.log(e),o.user.token=e.token,o.user.username=e.data.username,n.localStorage.token=e.token,n.localStorage.username=e.data.username,headers=a.defaultHeaders,headers["x-access-token"]=e.token,console.log(o.user.token),console.log(a.defaultHeaders),t.go("fatmind.note")},function(o){return console.log(o),e.errorMessage=o.data.message,!1})}}]);