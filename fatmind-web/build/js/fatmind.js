angular.module("fatmind",["fatmind.controllers","fatmind.config","ui.router","restangular","ngCookies"]).config(["$stateProvider","$locationProvider","$urlRouterProvider","RestangularProvider","APP_APIKEY","APP_URL",function(e,t,o,r,n,a){var l=a;r.setBaseUrl(l),r.setDefaultHeaders({"x-api-key":n,"x-access-token":void 0}),o.otherwise("/"),e.state("fatmind",{"abstract":!0,template:"<section ui-view></section>"}).state("fatmind.note",{url:"/",templateUrl:"templates/note.html",controller:"NoteCtrl as n",data:{requireLogin:!0}}).state("fatmind.register",{url:"/register",templateUrl:"templates/register.html",controller:"RegisterCtrl as r",data:{requireLogin:!1}}).state("fatmind.login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginCtrl as l",data:{requireLogin:!1}}).state("fatmind.logout",{url:"/logout",templateUrl:"templates/logout.html",controller:"LogoutCtrl as lo",data:{requireLogin:!0}})}]).run(["$cookies","$window","$rootScope","$state","$timeout","Restangular",function(e,t,o,r,n,a){o.user={token:t.localStorage.token||void 0,username:t.localStorage.username||void 0},console.log(o.user.token+" token"),o.$on("$stateChangeStart",function(e,t,n){var l=t.data.requireLogin;console.log(l+" require login"),l&&"undefined"===o.user.token?(console.log("got here no token in rootscope"),e.preventDefault(),r.go("fatmind.login")):"undefined"!==o.user.token&&(console.log("got here token"),console.log(o.user.token),headers=a.defaultHeaders,headers["x-access-token"]=o.user.token)})}]);